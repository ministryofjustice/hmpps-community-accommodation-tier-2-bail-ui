{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% extends "./_risk-to-self-screen.njk" %}
{% from "../../../partials/dateOfOasysImport.njk" import dateOfOasysImport %}

{% set pageName = "vulnerability" %}

{% block questions %}

  <p class="govuk-body">
    A person is vulnerable if there is a risk of other people harming them. Someone may be vulnerable in prison, in the community, or both. 
  </p>

  <p class="govuk-body">
    Being vulnerable in prison includes being victimised, bullied or assaulted by others. 
  </p>

  <p class="govuk-body">
    Being vulnerable in the community includes experiencing or being at risk of:
    <ul class="govuk-list govuk-list--bullet">
      <li>domestic abuse</li>
      <li>physical, financial or psychological abuse</li>
      <li>sex work</li>
      <li>bullying</li>
      <li>gang affiliated risks</li>
      <li>cuckooing (their home being taken over and used for criminal activity)</li>
      <li>modern day slavery, such as forced labour and sexual or criminal exploitation</li>
    </ul>
  </p>

  <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

  {% if page.importDate %}
    {% set date = page.importDate %}
    {{dateOfOasysImport(date)}}
  {% endif %}

  {{
      formPageTextArea(
        {
          fieldName: 'vulnerabilityDetail',
          label: {
            text: page.questions.vulnerabilityDetail.question,
            classes: "govuk-label--m"
          },
          hint: {
            text: 'Include all current risk information and remove sensitive information, such as names and addresses.'
          }
        },
        fetchContext()
      )
  }}

  {% if page.hasOasysRecord %}
    {{ govukInsetText({
      text: "If you have noticed information in OASys is out of date, you should tell the person responsible for updating OASys."
    }) }}
  {% endif %}

  {{ govukCheckboxes({
        idPrefix: "confirmation",
        name: "confirmation",
        errorMessage: errors.confirmation,
        items: page.items()
    }, 
    fetchContext()
    ) 
  }}

{% endblock %}
